<?xml version="1.0" encoding="UTF-8"?>

<?import io.github.palexdev.materialfx.controls.MFXButton?>
<?import io.github.palexdev.materialfx.controls.MFXPasswordField?>
<?import io.github.palexdev.materialfx.controls.MFXTextField?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Tab?>
<?import javafx.scene.control.TabPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<?import javafx.scene.shape.Circle?>
<?import javafx.scene.paint.ImagePattern?>
<?import javafx.scene.image.Image?>

<GridPane prefHeight="600.0" prefWidth="1000.0" styleClass="login-root" xmlns="http://javafx.com/javafx/20.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.greengrocer.controllers.LoginController">
   <columnConstraints>
      <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" percentWidth="50.0" prefWidth="100.0" />
      <ColumnConstraints hgrow="SOMETIMES" minWidth="10.0" percentWidth="50.0" prefWidth="100.0" />
   </columnConstraints>
   <rowConstraints>
      <RowConstraints minHeight="10.0" prefHeight="30.0" vgrow="SOMETIMES" />
   </rowConstraints>
   <children>
      <!-- Left Side: Background Image & Text -->
      <StackPane fx:id="leftPanel" styleClass="login-background-image, login-left-panel" GridPane.columnIndex="0">
         <children>
            <VBox alignment="CENTER_LEFT" spacing="10.0" style="-fx-padding: 40;">
               <children>
                  <Label fx:id="sloganLabel" style="-fx-text-fill: white; -fx-font-weight: bold;" text="Fresh &amp; Natural">
                     <font>
                        <Font name="System Bold" size="48.0" />
                     </font>
                  </Label>
                  <Label fx:id="subtextLabel" style="-fx-text-fill: rgba(255,255,255,0.8);" text="The freshest vegetables and fruits at your doorstep." wrapText="true" />
               </children>
            </VBox>
         </children>
      </StackPane>

      <!-- Right Side: Forms -->
      <StackPane GridPane.columnIndex="1">
         <children>
            <VBox alignment="CENTER" styleClass="login-right-panel">
               <children>
                  <TabPane fx:id="tabPane" styleClass="hidden-tabs" tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
                     <tabs>
                        <!-- Login Tab -->
                        <Tab text="Login">
                           <content>
                              <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER" styleClass="scroll-pane" vbarPolicy="AS_NEEDED">
                                 <content>
                                    <VBox alignment="CENTER" spacing="5.0">
                                       <children>
                                           <Circle radius="60.0" stroke="TRANSPARENT" strokeType="INSIDE">
                                               <fill>
                                                   <ImagePattern>
                                                       <image>
                                                           <Image url="@../images/logo.png"/>
                                                       </image>
                                                   </ImagePattern>
                                               </fill>
                                           </Circle>
                                          <VBox alignment="CENTER" spacing="2.0">
                                             <children>
                                                <Label styleClass="login-header-label" text="Login" />
                                                <Label styleClass="login-subheader-label" text="Enter your information to access your account." />
                                             </children>
                                          </VBox>
            
                                          <VBox alignment="CENTER_LEFT" maxWidth="450.0" spacing="2.0" VBox.vgrow="NEVER">
                                             <children>
                                                <Label styleClass="field-label" text="Username" />
                                                <MFXTextField fx:id="usernameField" floatMode="DISABLED" maxWidth="1.7976931348623157E308" prefHeight="50.0" promptText="Enter your username" />
                                             </children>
                                          </VBox>
            
                                          <VBox alignment="CENTER_LEFT" maxWidth="450.0" spacing="2.0" VBox.vgrow="NEVER">
                                             <children>
                                                <Label styleClass="field-label" text="Password" />
                                                <MFXPasswordField fx:id="passwordField" floatMode="DISABLED" maxWidth="1.7976931348623157E308" prefHeight="50.0" promptText="Enter your password" />
                                             </children>
                                          </VBox>
            
                                          <Label fx:id="errorLabel" styleClass="error-label" visible="false" />
            
                                          <MFXButton fx:id="loginButton" maxWidth="450.0" onAction="#handleLogin" styleClass="login-button" text="LOGIN" />
            
                                          <HBox alignment="CENTER" spacing="5.0">
                                             <children>
                                                <Label styleClass="link-label" text="Don't have an account?" />
                                                <Label onMouseClicked="#switchToRegister" styleClass="link-label-bold" text="Sign Up" />
                                             </children>
                                          </HBox>
                                       </children>
                                       <padding>
                                          <Insets bottom="10.0" left="40.0" right="40.0" top="10.0" />
                                       </padding>
                                    </VBox>
                                 </content>
                              </ScrollPane>
                           </content>
                        </Tab>
      
                        <!-- Register Tab -->
                        <Tab text="Sign Up">
                           <content>
                              <ScrollPane fitToWidth="true" fitToHeight="true" hbarPolicy="NEVER" styleClass="scroll-pane" vbarPolicy="AS_NEEDED">
                                 <content>
                                    <VBox alignment="CENTER" spacing="15.0">
                                       <children>
                                           <Circle radius="60.0" stroke="TRANSPARENT" strokeType="INSIDE">
                                               <fill>
                                                   <ImagePattern>
                                                       <image>
                                                           <Image url="@../images/logo.png"/>
                                                       </image>
                                                   </ImagePattern>
                                               </fill>
                                           </Circle>
                                          <VBox alignment="CENTER" spacing="5.0">
                                             <children>
                                                <Label styleClass="login-header-label" text="Sign Up" />
                                                <Label styleClass="login-subheader-label" text="Create a new account." />
                                             </children>
                                          </VBox>
      
                                          <VBox alignment="CENTER_LEFT" maxWidth="450.0" spacing="5.0">
                                             <children>
                                                <Label styleClass="field-label" text="Full Name" />
                                                <MFXTextField fx:id="regFullNameField" floatMode="DISABLED" maxWidth="1.7976931348623157E308" prefHeight="45.0" promptText="Enter your name and surname" />
                                             </children>
                                          </VBox>
      
                                          <VBox alignment="CENTER_LEFT" maxWidth="450.0" spacing="5.0">
                                             <children>
                                                <Label styleClass="field-label" text="Username" />
                                                <MFXTextField fx:id="regUsernameField" floatMode="DISABLED" maxWidth="1.7976931348623157E308" prefHeight="45.0" promptText="Choose a username" />
                                             </children>
                                          </VBox>
      
                                          <VBox alignment="CENTER_LEFT" maxWidth="450.0" spacing="5.0">
                                             <children>
                                                <Label styleClass="field-label" text="Password" />
                                                <MFXPasswordField fx:id="regPasswordField" floatMode="DISABLED" maxWidth="1.7976931348623157E308" prefHeight="45.0" promptText="At least 6 characters" />
                                                <VBox fx:id="passwordStrengthContainer" maxWidth="1.7976931348623157E308" visible="false" />
                                             </children>
                                          </VBox>
      
                                          <VBox alignment="CENTER_LEFT" maxWidth="450.0" spacing="5.0">
                                             <children>
                                                <Label styleClass="field-label" text="Confirm Password" />
                                                <MFXPasswordField fx:id="regPasswordConfirmField" floatMode="DISABLED" maxWidth="1.7976931348623157E308" prefHeight="45.0" promptText="Re-enter your password" />
                                             </children>
                                          </VBox>
      
                                          <Label fx:id="regErrorLabel" styleClass="error-label" visible="false" />
                                          <Label fx:id="regSuccessLabel" styleClass="success-label" visible="false" />
      
                                          <MFXButton fx:id="registerButton" maxWidth="450.0" onAction="#handleRegister" styleClass="login-button" text="SIGN UP" />
      
                                          <HBox alignment="CENTER" spacing="5.0">
                                             <children>
                                                <Label styleClass="link-label" text="Already have an account?" />
                                                <Label onMouseClicked="#switchToLogin" styleClass="link-label-bold" text="Login" />
                                             </children>
                                             <VBox.margin>
                                                <Insets top="10.0" />
                                             </VBox.margin>
                                          </HBox>
                                       </children>
                                       <padding>
                                          <Insets bottom="20.0" left="40.0" right="40.0" top="20.0" />
                                       </padding>
                                    </VBox>
                                 </content>
                              </ScrollPane>
                           </content>
                        </Tab>
                     </tabs>
                  </TabPane>
               </children>
            </VBox>
            <MFXButton fx:id="themeToggleBtn" contentDisplay="GRAPHIC_ONLY" styleClass="icon-button-transparent" StackPane.alignment="TOP_RIGHT">
               <graphic>
                  <org.kordamp.ikonli.javafx.FontIcon iconLiteral="fas-moon" iconSize="20" iconColor="#757575"/>
               </graphic>
               <StackPane.margin>
                  <Insets top="20.0" right="20.0" />
               </StackPane.margin>
            </MFXButton>
         </children>
      </StackPane>
   </children>
</GridPane>
